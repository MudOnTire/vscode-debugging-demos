// make connection
var socket = io.connect('http://localhost:4000');

// query DOM
var message = document.getElementById('message'),
  user = document.getElementById('user'),
  btn = document.getElementById('send'),
  output = document.getElementById('output'),
  feeback = document.getElementById('feedback');

var names = ['åˆ˜æ°', 'æ›¾æ¶›(Stevie)', 'æ›¾ç‡•', 'é™ˆå»ºäº®', 'é™ˆå…‹æ™—', 'é™ˆå²š', 'é™ˆæ•', 'é™ˆå°‘å¼º(Shawn C)', 'é™ˆæ€æˆ', 'é™ˆæ€è…¾', 'é™ˆæ¶›', 'é™ˆé‘«', 'é™ˆæ°¸å‰ï¼ˆKirinï¼‰', 'é™ˆæ¶Œæ–‡', 'é™ˆé•¿é‡(Dreamon)', 'é™ˆèŠ·è–‡', 'æˆ´è¾‰ç‚³', 'æˆ´åµ©æ¶›ï¼ˆTomï¼‰', 'æˆ´å¼¢', 'ä¸èƒœ', 'ä¸è‰³', 'æ®µå¥•æ»¨', 'æœç« äº®', 'æ–¹æ™¨', 'æ–¹å›­å›­', 'æ–¹ç‘œå˜‰', 'æ¨Šæ˜Š', 'èŒƒäºšçª', 'èŒƒäº¿æ¸…(Van)', 'è´¹ç¿”(Rock)', 'ç¬¦èŒ(fum)', 'ä»˜æ€å®‡(D-Rain)', 'ç”˜å©·å©·', 'é«˜ç¿”', 'è‘›è‰¯æ–¹', 'è‘›å¨…ç’‡', 'ç®¡å¤(Andy)', 'éƒ­èè', 'ä½•å¾·ç…§', 'ä½•æ¸…å(heqh)', 'ä½•ç‚œ', 'è´ºå¿—è¾‰', 'ä¾¯æ•', 'åé–æ±Ÿ(huajj)', 'é»„è¯šå¤©', 'é»„è°ƒèª', 'é»„ä¸œ', 'é»„æ°(huangj)', 'é»„è¯—å°§(Loco)', 'é»„åˆè¨€(Same)', 'é»„å°è¿', 'é»„è”šæ™”', 'èƒ¡å»ºå¼º(will)', 'èƒ¡å†›ä¼Ÿ', 'éœçŠçŠ(sarah)', 'èƒ¡å¨', 'èƒ¡é‘«æ¾„', 'å§œä¼¯(Bole)', 'è’‹å¤§é¹', 'è’‹ç£Š', 'æ±Ÿç«‹æ²¥', 'æ±Ÿå©·(Anita)', 'å§œæ™“å‡¤', 'è’‹å“çº¯', 'è´¾å°çº¢ï¼ˆAmityï¼‰', 'è§£é¢–', 'äº¬æ€ç¥º', 'é‡‘ç¥¥æ—', 'å­£å»¶å¤', 'é›·è‰³', 'æçˆ±ç', 'æ¢ç»†ç‡•', 'å»–å”¤å¿ (liaohz)', 'æå†°è¹', 'æé«˜é£', 'æå¹¿(Landen)', 'ææµ·éœ(hailie)', 'æç§‘å®(Leo)', 'æä¸½è‰³', 'ææ˜å‘', 'å‡Œå¼º(snoopy)', 'æ—ç¥º', 'åˆ˜å®‰(Andrew)', 'åˆ˜å¾·å¿—', 'åˆ˜è´µå†›(Sam)', 'åˆ˜æµ·æ´‹', 'åˆ˜æµ©(james)', 'åˆ˜çº¢', 'åˆ˜å»ºå†›', 'åˆ˜å¿µ', 'åˆ˜é¹', 'åˆ˜æ—ºæ˜¥(liuwangchun)', 'åˆ˜å°æ°', 'åˆ˜é›…ä¸½(Sherry)', 'åˆ˜é›¨é’(Luke)', 'åˆ˜ç´«è‰¯', 'æå•¸å¤©(Shelton)', 'æå­¦å³°', 'æçŒ·çŒ·ï¼ˆBruce leeï¼‰', 'é»æ¯“(Liy)', 'æ¥¼æ–¹å›(loufj)', 'å¨„æ¾', 'èŠ¦æˆ', 'å¢é‡‘å‡¤', 'å¢å…¢', 'é™†äº®äº®', 'ç½—å’', 'ç½—æ³½å…‰', 'å•å¿—', 'é©¬å¥', 'æ¯›æœˆå¿ ', 'æ¯›å®‡å³°(maoyf)', 'RMS è´Ÿè´£äºº è’™åš', 'å­Ÿç»´éŸ¬(Jony)', 'å—äº¬ç®¡ç†å‘˜(service)', 'ç‰›å€©(Amy)', 'å½­åº·', 'å½­å¼º', 'é’±é¾™', 'ç§¦åˆ©è¾¾(wadason)', 'é‚±åº†', 'é½è·ƒä¼Ÿ(ï¼ˆCherryï¼‰)', 'é¥¶ç¾è‹±', 'é¥¶è½¶ç¾¤', 'é‚µå¤©æˆï¼ˆstcï¼‰', 'æ²ˆå°†', 'æ²ˆæ¨', 'ä½˜é›¨æµ©', 'æ–½å°è¾‰(shixh)', 'å¸…æ˜æ˜Š', 'å®‹æ—æ—', 'å­™æ™¨', 'å­™æ˜Š(Hulk)', 'å­™æ—(Carrï¼‰', 'å­™ä½©é›¯(sunpw)', 'æ¶‚å»ºæ°‘(Jemi)', 'å± æ­£æ¾(Gattuso)', 'ç‹çˆ±å¹³', 'ç‹ç‚³ç›', 'ç‹å»ºä¼Ÿ(James)', 'æ±ªç¨(wangk)', 'æ±ªæ•é’', 'æ±ªé¹é¸¿(Big cousin)', 'ç‹èµ›', 'ç‹åº­æµª', 'ç‹å…´', 'æ±ªæ´‹(Allen)', 'ç‹é€¸((Siri))', 'ç‹æ¨Ÿæ¯›', 'ä¸‡è’™ï¼ˆwanmï¼‰', 'ä¸‡æ™ºé¢–', 'å´ä¸°å¹³', 'å´æ‰¬(phil)', 'å´ç‘¶ç‘¶', 'æ­¦ä¸€å‡¡(Evanna)', 'RMS äº§å“ å¤å›½åº†', 'å‘ç‘¶', 'è°¢ç¿”å®‡', 'çŠ€é¸Ÿäº‘å—äº¬ç®¡ç†å‘˜', 'çŠ€é¸Ÿäº‘å—äº¬æ˜“å®æ”¯ä»˜è´¦æˆ·', 'ç†Šæ–‡éš½', 'å¾æ–Œ', 'è–›æ™¨', 'è–›å­Ÿ', 'è–›æ¢¦å©·', 'å¾æ¬¢(Nicklaus)', 'è®¸ç«(Kimi)', 'å¾ç¤¼å‡¯(Ryan)', 'è®¸å…æµ·(Lawrence)', 'å¾ç‰å§', 'å¾èµµç„±', 'æ¨ä½³è¾‰', 'æ¨å©§åš', 'æ¨é”´ï¼ˆMarsï¼‰', 'é˜³ä¹(Leo)', 'æ¨äº®', 'æ¨é»é»', 'æ¨æ˜æ¶›(Jacky)', 'æ¨å®(Kuma)', 'RMS å‰ç«¯ æ¨ä»åº­', 'æ¨éŸ¬', 'æ¨ä¼Ÿæ°‘', 'æ¨æ™“ä¸¹(yangxd)', 'æ¨å®‡(Hunk)', 'æ¨éœ‡å®‡', 'é¢œæµ©', 'å§šæ–Œ(yaob)', 'å¶ä¸œ(å·å²¸æ®´ğŸŸ)', 'å°¹ç§€å³°(å°¹ç§€å³°)', 'æ¸¸å¥', 'è¢å¾å†›(ï¼ˆGerryï¼‰)', 'ä½™ä½³ä½³(Echo)', 'äºç²ç²', 'å–»åŸ¹çƒ½', 'ä¿æ–‡ä»™', 'äºæ´‹æ´‹', 'ç¿Ÿæµ©', 'å¼ ç¢§æ™¨', 'ç« å‰‘æ—¸', 'å¼ é¾™(Lion)', 'å¼ è·¯è·¯(Broucetrong)', 'å¼ çª', 'å¼ å¼º(ALEX)', 'å¼ å¼ºå¼º', 'å¼ æ¶›(Dante)', 'å¼ æ–‡ä¿Š', 'å¼ å­å»‰(levi)', 'å¼ ç‡•(Zoe)', 'å¼ é€¸è’™', 'å¼ ç›Šé“­', 'å¼ è¹', 'å¼ è‹±è²', 'å¼ å…ƒæ­¦', 'å æ…§æ•', 'èµµèŠ®', 'èµµç»Ÿå†›', 'éƒ‘èª', 'éƒ‘æ…§ç´', 'éƒ‘å®¶ç‰', 'éƒ‘ç»´', 'é’Ÿæ¸…è²', 'é’Ÿç« å¿—ï¼ˆFrankï¼‰', 'å‘¨ä¿ä¹', 'å‘¨æ™¶æ™¶', 'å‘¨å¿—æ˜', 'ç¥ç¿ ç¿ ', 'æœ±æ˜Ÿç¥(zhuxy)', 'æœ±å¿—æ¸…(zhuzq)', 'é‚¹æ—‹å¹³'];

user.value = names[Math.floor(Math.random() * names.length)];

function sendMsg() {
  socket.emit('chat', {
    message: message.value,
    user: user.value
  });
  message.value = "";
}

// emit events 
btn.addEventListener('click', sendMsg);

message.addEventListener('keypress', function (e) {
  if ((e.keyCode || e.which) === 13) {
    sendMsg();
  } else {
    socket.emit('typing', user.value);
  }
});

// listen for events
socket.on('chat', function (data) {
  feeback.innerHTML = '';
  output.innerHTML += `<p><strong>${data.user}: </strong>${data.message}</p>`;
});

socket.on('typing', function (name) {
  feeback.innerHTML = `<p><em>${name} is typing a message...</em></p>`;
});